What is Middleware?
Validation Example: When you log into Instagram, it checks your username and password. Middleware does similar checks for APIs to ensure they have the required information.


Example Scenario:
URL: http://localhost:1122/view-category?key=123456789
Middleware checks the key parameter:
If key is missing, it returns "required field missing".
If key is not 123456789, it returns "invalid key".
If key is 123456789, it proceeds to the next function.

so now if you see on the url 
http://localhost:1122/view-category?key=
then it gives required field missing 
and for http://localhost:1122/view-category?key=123456789
gives found successfully

now i want to have this condition in all of the operations ie add,view,delete and update 
so in future i want to change then i have to change in all 
so we use middleware 



for this we create a new file middleware.js
in that if move this condition in the middleware file in module.export function 
and pass parameters of request,response and 
next 
where next is used when the two condition ie missing field and invalid key is not matched 
then key goes to next function which calls the function in index.js
now we want call the middleware file
whole middleware code: 
(module.exports = (request, response, next) => {
    if (request.query.key == '') {
        var data = {
            status: false,
            message: 'record field missing',
            data: ''
        }
    } else if (request.query.key != 123456789) {
        var data = {
            status: false,
            message: 'invalid key',
            data: ''
        }
    } else {
        next();
    }
    response.send(data);
})



before this we want to know that there are two Types of Middleware
Application Middleware: Used for multiple routes.
Routing Middleware: Used for specific routes with a router.


now include the middleware file in index.js
and that variable of middleware include it in add-category and view-category function
(server.post('/add-category', validation, (request, response) => {})

server.get('/view-category', validation, (request, response) => {}))

now you get the response on the browser 
if we give url http://localhost:26/view-category?key=123456789
then it gives record found successfully
and if we give url http://localhost:26/view-category?key=
then it gives record field missing 


now if i want to change the condition of the key i dont need to go to every operation i can just change it in middleware file 

This was the application middleware in both add and view category function 



routing middleware:

in this we dont need to make two separate file 
ie index.js and middleware.js 

we use some condition 

we create a variable route in that we use express variable having express which has router function
then we tell router to use validation file 
also tell the server to use the route file 

now apply on update operation
use get method and replace server with route 
and we get the response on browser

this is routing middleware 




















